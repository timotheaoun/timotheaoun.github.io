<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cr√©er un grapheur en python sans biblioth√®ques ?</title>
<link rel="stylesheet" href="../../Style.css">
 <meta name="description" content="Comment cr√©er un grapheure python sans utiliser de biblioth√®ques ? (mise √† part maths et turtle) | Timoth√© AOUN">
 <meta name="keywords" content="grapheur python, cr√©er un grapheur, python sans biblioth√®ques, comment faire un grapheur en python, sans biblioth√®que, afficher graphique python, python graphique simple, Timoth√© AOUN">
  <meta name="robots" content="index, follow">
  <meta name="author" content="Timoth√© AOUN">
  <style>
  a {
  text-decoration: none;
  color: green;
  }
  a:hover {
 text-decoration: underline;
  color: orange ;
  }
  code1 {
  background-color: rgb(50, 10, 40);
  color: #444;
  }
  .commentaire {
      flex: 1;
      font-family: Arial, sans-serif;
      font-size: 16px;
      color: #333;
      background-color: transparent;
      padding: 10px;
      border-left: 2px solid #888;
    }
	    .crayon {
      display: inline-block;
      padding: 0.2em 0.4em;
      position: relative;
      z-index: 0;
      color: #000;
    }

    .crayon::before {
      content: '';
      position: absolute;
      top: 0.1em;
      left: 0;
      right: 0;
      bottom: 0.1em;
      z-index: -1;
      transform: rotate(-1deg);
      filter: blur(0.7px);
      opacity: 0.8;
      border-radius: 8px;
    }

    .crayon.vert::before {
      background: repeating-linear-gradient(
        45deg,
        #4caf50,
        #4caf50 2px,
        #388e3c 3px,
        #4caf50 4px
      );
    }

    .crayon.bleu::before {
      background: repeating-linear-gradient(
        -45deg,
        #2196f3,
        #2196f3 2px,
        #1565c0 3px,
        #2196f3 4px
      );
    }

    .crayon.rouge::before {
      background: repeating-linear-gradient(
        60deg,
        #f44336,
        #f44336 2px,
        #c62828 3px,
        #f44336 4px
      );
    }

    .crayon.aqua::before {
      background: repeating-linear-gradient(
        -60deg,
        #00ffff,
        #00ffff 2px,
        #00cccc 3px,
        #00ffff 4px
      );
    }
	.mark2 {
  background-color: transparent;
  color: inherit;
  padding: 0 2px;
  display: inline-block;
 background-image: linear-gradient(90deg, rgba(255, 200, 150, 0.6), rgba(255, 150, 150, 0.7), rgba(200, 150, 255, 0.8));
  background-repeat: no-repeat;
  background-size: 100% 100%; /* Plus droit et moins arrondi */
  background-position: 0 10%; /* Ajuste la position verticale */
  border-radius: 5px; /* Angle plus droit */
}
  </style>
</head>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
<body>
  <div class="container">
    <h1>Cr√©er un grapheur en python sans biblioth√®ques ?</h1>
		 <figcaption>R√©dig√© 29/05/2025</figcaption>
	 <br>
    <div id="Intro">
	<h2> Introduction... </h2>
	 Sur ma calculatrice NumWorks, j‚Äôai toujours √©t√© √©merveill√© devant la fonctionnalit√© grapheur.  
      J‚Äôaimerais recr√©er cela en Python, mais **sans utiliser de biblioth√®ques graphiques** comme tkinter ou matplotlib.  
      <br><br>
     Au d√©but, j'ai essay√© une premi√®re approche: √† partir d'une expression, mon script calculait la pente ainsi que l'ordonn√©e √† l'origine de la fonction. Malheuresement, bien qu'√©l√©gante, mon approche restait extr√®nement limit√©e. Comment les arrondis sont-ils possible √† tracer ? (comme un simple fonction carr√©) Aujourd'hui, Lundi 26 mai 2025, j'ai enfin compris quelque chose...
	 <br><br>
	 En regardant la partie grapheur de ma calculatrice de plus pr√®s, j'ai remarqu√© qu'elle ne calculait pas un coefficient directeur mais toutes les valeurs de y pour des valeurs de x calcul√©es avec un interval (par exemple x=0.01; 0.02...) quand on zoom ou d√©zoom, cet interval s'ajuste tout simplement, d'o√π le l√©ger d√©lais et le raffraichissement d'√©cran. On peut donc facilement recr√©er un grapheur en python sans r√©el besoin de biblioth√®ques (sauf math et turtle)
    </div>
	<br>
	<br>
	<div id="parties" >
	<h2> Comment faire ? Quelles sont les difficult√©s du projet ?</h2>
	<li>‚Üí  Il faut faire un input qui demande l'expression d'une fonction
	<li>‚Üí  Il faut tracer l'axe des abcisses et des ordonn√©es et d√©finir le centre comme l'origine du rep√®re
	<li>‚Üí  La fonction est extraite et r√©organis√©e de fa√ßon √† pouvoir √™tre interpr√™t√©e par le script (par exemple transformer 3x+5 en 3*x+5)
	<li>‚Üí  Une boucle part de xmin jusqu'√† xmax en calculant f(x+0.01) avec x=x+0.01 √† chaque boucles, on pourrait d√©finir un fonction f(x) avec l'expression r√©organis√©e de l'input
	<li>‚Üí  Le probl√®me c'est qu'il faut relier plusieurs points. Il faut donc dire au script √† combien de degr√©s s'orienter et de combien avancer. Pour cela, nous allons devoir faire des maths, pour savoir de combien avancer, c'est relativement simple avec le th√©or√®me de pythagore par exemple, mais pour l'orientation, cela va √™tre plus compliqu√©...
<br>
<br>
<figure>
<img src="Geogebra.png" alt="Projet cr√©√© sur g√©og√©bra: https://www.geogebra.org">
 <figcaption>Cr√©√© avec GeoGebra ‚Äì www.geogebra.org</figcaption>
</figure>
Xa et Xb sont des valeurs prises sur la m√™me droite tout comme Ya et Yb donc le triangle est rectangle. D'apr√®s le th√©or√®me de pythagore, la longeur AB est de: $$AB=\sqrt{\underbrace{(X_b - X_a)^2}_{\text{Longeur du triangle}} + \underbrace{(Y_b - Y_a)^2}_{\text{Hauteur du triangle}}}$$
$$AB=\sqrt{\underbrace{(X_a - X_b)^2}_{\text{(A-B)^2=(B-A)^2}} + \underbrace{(Y_a - Y_b)^2}_{\text{Idem}}}$$
<br>
Le probl√®me, c'est pour calculer √† combien s'orienter:
Les formules trigonom√©triques utilisent la longueur des c√¥t√©s. Le cosinus d'un angle, par exemple, utilise le rapport entre le c√¥t√© adjaccent √† cet angle par l'hypoth√©nuse du triangle
<br>
cos(√Ç)=(Xb-Xa)/AB 
<figure>
<img src="GeogebraAngles.PNG" alt="Projet cr√©√© sur g√©og√©bra: https://www.geogebra.org">
 <figcaption>Cr√©√© avec GeoGebra ‚Äì www.geogebra.org</figcaption>
</figure>
 Le probl√®me est qu'on a aucun moyen de discerner le triangle AOB du triangle AOB': O √©tant le milieu du segment B'B. D'un c√¥t√©, g√©om√©triquement parlant, ce sont les m√™mes triangles: ils sont sym√©triques et le plan est retournable.
D'un autre c√¥t√©, ce ne sont pas les m√™mes triangles si on part du principe que c'est un quadrant: ^(OAB)=^(OAB') mais par rapport √† notre droite de r√©f√©rence passant par [AO] l'un aura une orientation n√©gative et l'autre positive
<br>
<br>
 Prenons un exemple simple en scratch
<br>
<figure>
<img src="ScratchAngles-.png" width="55%" alt="Projet cr√©√© sur scratch: https://scratch.mit.edu/">
 <figcaption>Cr√©√© avec Scratch ‚Äì scratch.mit.edu </figcaption>
</figure>

Le petit h√©risson part de l'axe des abcisses et pour tracer [AB], avant d'avancer, il doit s'orienter √†   \( -\widehat{OAB} \) et non   \( \widehat{OAB} \) tandis que pour tracer [AB'], il doit s'orienter √†   \( \widehat{OAB} \) degr√©s. 
<figure>
	<img src="ScratchAngles+.png" width="55%" alt="Projet cr√©√© sur scratch: https://scratch.mit.edu/">
 <figcaption>Cr√©√© avec Scratch ‚Äì scratch.mit.edu </figcaption>
</figure>
	Le probl√®me est le m√™me avec les sinus et tangentes puisqu'ils se basent uniquement sur des rapports de longueurs (donc en valeur absolue), ils nous donnent l'angle ^(OAB) qui est √©gal √† ^(OAB') mais c'est tout!
	<br>
	<br>
	En r√©alit√©, ce qu'on cherche, c'est cet angle par rapport √† la droite parall√®le √† l'axe des abcisses passant par le milieu de BB'. 
	<br>
	En r√©fl√©chissant un peu, j'ai trouv√© la solution: il faut v√©rifier si Yb est inf√©rieur √† Ya (donc B en dessous de A) ce qui veut dire qu'il faut s'orienter dans le sens des aiguilles d'une montre donc positivement. En cas inverse, il faut s'orienter n√©gativement
	En gros, il faut ajouter une condition qui v√©rifie si B est en dessous ou au dessus de b. Cela nous permet de savoir si on s'oriente √† +Arcoss((Xb-Xa)/AB) degr√©s ou -Arcoss((Xb-Xa)/AB) degr√©s. 
√ßa a l'aire compliqu√© mais regardez cette repr√©sentation que j'ai construite sur G√©og√©bra: 
<figure>
	<img src="Zones.PNG" width="55%" alt="Projet cr√©√© avec G√©og√©bra ">
 <figcaption>Cr√©√© avec G√©og√©bra  www.geogebra.org</figcaption>
</figure>
Comme Arcoss est comprise entre 0 et 180 degr√©s et que le sens d'orientation choisi est dans le sens des aiguilles d'une montre, quand B est en dessous de A, on s'oriente √† Arcoss(...) car on va dans le sens des aiguilles d'une montre. Dans l'autre cas, il faut s'orienter √† -Arcoss(...)

	</div>
	<br>
	<br>
	<div id="Code">
	<h2> Allez, codons ! </h2>

<p> D√©j√†, importons les biblioth√®ques n√©cessaires au projet: 
<li>Nous allons √™tre oblig√©s d'importer la biblioth√®que <code>math</code> qui va nous √™tre indispensable pour utiliser des fonctions, pour plus d'informations, vous pouvez <a href="https://docs.python.org/fr/3.5/library/math.html#module-math">La documentation de <code>math</code></a>
<li>Nous allons √©galement devoir utiliser <code>turle</code>: Cette biblioth√®que est indispensable pour g√©rer les trac√©s de notre grapheur. Pour plus d'infos, vous pouvez √©gaement consulter <a href="https://docs.python.org/3/library/turtle.html">La documentation de <code>turle</code></a>
<p> On se retrouve donc avec</p>
<code1>
import turtle
import math
</code1>
<p> Il nous faut maintenant tracer la grille et les axes:</p>

<div class="code-container" role="region" aria-label="Bloc de code Python">
  <div class="code-header">
    python
    <button class="btn-copy" aria-label="Copier le code" onclick="copyCode()">
      üìã Copier
    </button>
  </div>
  <pre class="code-content" id="code-block">
# --- Param√®tres du quadrillage ---
step = 50  # distance entre les lignes du quadrillage
size = 500  # taille du plan

# --- Initialisation de la fen√™tre ---
turtle.setup(size + 100, size + 100)
turtle.speed(0)
turtle.hideturtle()
turtle.bgcolor("white")
turtle.title("Grapheur - Sans biblis")

# --- Quadrillage ---
def draw_grid():
    turtle.pencolor("lightgray")
    for x in range(-size // 2, size // 2 + 1, step):
        turtle.penup()
        turtle.goto(x, -size // 2)
        turtle.pendown()
        turtle.goto(x, size // 2)
    for y in range(-size // 2, size // 2 + 1, step):
        turtle.penup()
        turtle.goto(-size // 2, y)
        turtle.pendown()
        turtle.goto(size // 2, y)

    # Axes
    turtle.pencolor("black")
    turtle.penup()
    turtle.goto(-size // 2, 0)
    turtle.pendown()
    turtle.goto(size // 2, 0)
    turtle.penup()
    turtle.goto(0, -size // 2)
    turtle.pendown()
    turtle.goto(0, size // 2)

# --- Coordonn√©es de d√©part ---
X0, Y0 = 0, 0  # touche l'axe des ordonn√©es et l'axe des abcisses (donc en gros axe de sym√©trie)
  </pre>
</div>
<p> Et on appelle la fonction avec <code1>draw_grid()</code1>
<p> Et voil√†, on obtient maintenant cela en √©x√©cutant le script python: </p>
<img src="Execution1.axes.png" width="55%">
<p> Si vous avez du mal √† comprendre ce que fait le programme, vous pouvez consulter ma rubrique <a href="#Informatique.pyton.premierspas">Informatique>learnpython>premierspas </a>. De mani√®re assez simplifi√©e, voici un programme que j'ai cod√© sur scratch assez similaire:</p>
<iframe src="https://scratch.mit.edu/projects/editor/?tutorial=getStarted" width="100%"></iframe>

<br> 
<p> On va maintenant cr√©er une fonction f(x), pour le moment, pr√©d√©finie sur 2x+3:</p>
 <code1> def Fonction(x): </code1><br>
 <code1> ¬†¬†¬†¬†return 2 * x + 3 </code1>
 <p> On commence notre code par cr√©er un xmin et xmax (plus tard adaptable si on d√©cide de cr√©er une √©chelle) et on s'oriente au niveau du point le plus √† gauche √† calculer tel qu'il forme un point G(xmin; <code>fonction(xmin)</code>), on se met √† ce point avec <code1>turtle.goto(xa, ya)</code1>0</p>
 <div class="code-container" role="region" aria-label="Bloc de code Python">
  <div class="code-header">
    python
    <button class="btn-copy" aria-label="Copier le code" onclick="copyCode()">
      üìã Copier
    </button>
  </div>
  <pre class="code-content" id="code-block">
xmin=-25
xmax=25
xa=xmin
ya=Fonction(xa)
echelle = 50  # 1 unit√© math√©matique = 50 pixels
turtle.goto(xa * echelle, ya * echelle)
  </pre>
   </div>
 <p> On va maintenant rentrer dans le vif du sujet puisque toute la logique que je vous ai expliqu√© pr√©c√©demment va rentrer en jeu: <br></p>
 <li>Cr√©ation d'une fonction <code>avancer_et_orienter</code> avec en param√®tre les coordonn√©es de deux points:</li>
 <div class="code-container" role="region" aria-label="Bloc de code Python">
  <div class="code-header">
    python
    <button class="btn-copy" aria-label="Copier le code" onclick="copyCode()">
      üìã Copier
    </button>
  </div>
  <pre class="code-content" id="code-block">
def avancer_et_orienter(xb, yb, xa, ya):
    AB=math.sqrt((xa-xb)**2+(ya-yb)**2) #Comme xb=xa+1, on pourrait juste mettre '((1/10)**2+(ya-yb)**2)**1/2' mais c'est mieux ainsi au cas o√π on adapterait les pas (de 1/10 ici)
    Orientation=math.acos((xb-xa)/AB)
    angle_degres = math.degrees(Orientation)  # Conversion en degr√©s (fois pi/180)
    if yb > ya:
        Orientation=360-Orientation #En th√©orie, on pourrait juste mettre un - mais je pr√©f√®re les angles positifs
    turtle.setheading(Orientation)
    turtle.pendown()     
    turtle.forward(AB) #On avance de la longeur exacte entre A(xa;ya) et B(xa+1;<code>fonction(a+1)</code>)-->Donc pas besoin de calculer xb ni yb, il nous faut juste un compteur qui ajoute 1 √† x √† chaque fois
    turtle.penup()  
    turtle.setheading(90) #s'orienter √† 90 degr√©s pour revenir √† l'orientation initiale
  </pre>
   </div>
 <p> Enfin, pour finir, j'avais fait cela </p>
 <div class="code-container" role="region" aria-label="Bloc de code Python">
  <div class="code-header">
    python
    <button class="btn-copy" aria-label="Copier le code" onclick="copyCode()">
      üìã Copier
    </button>
  </div>
  <pre class="code-content" id="code-block">
while xa+1 < xmax :
    xb=xa+1/10
    yb=Fonction(xb)
    avancer_et_orienter(xb, yb, xa, ya)
    xa=xb
    ya=yb   
turtle.done()
</pre>
</div>
</div>
<br><br>
<div id="Theend">
<h2> Le retour des maths ü§Ø </h2>
<p> L'heure du test √©tait arriv√©e, tout content, je cliquai sur le script et l√†... Horreurüò±, deux fautes magistrales √©taient pr√©sentes dans mon code. Au lieu de tout corriger, je vais vous expliquer mais pour √ßa, on va devoir refaire des maths</p>
<center><h3> Un probl√®me d'√©chelle:</h3></center>
<p>...</p>
<center><h3>Attendez, pas si vite!  on oublie atan2 !!!</h3></center>
<p> Tout √† l'heure, je vous ai dit qu'avec les formules trigonom√©triques, nous ne pouvions pas discerner les deux triangles ci-dessous car elles prennent les longueurs en compte. J'ai ensuite dit qu'il suffisait de regarder si B est au dessus de A.</p>
<figure>
<img src="GeogebraAngles.PNG" alt="Projet cr√©√© sur g√©og√©bra: https://www.geogebra.org">
 <figcaption>Cr√©√© avec GeoGebra ‚Äì www.geogebra.org</figcaption>
</figure>
<p>En revanche, j'avais compl√®tement oubli√© deux autres cas o√π le triangle serait le m√™me:</p>
<figure>
<img src="GeogebraOrientations2.PNG" alt="Projet cr√©√© sur g√©og√©bra: https://www.geogebra.org">
 <figcaption>Cr√©√© avec GeoGebra ‚Äì www.geogebra.org | √âdit√© sur Canva - https://www.canva.com</figcaption>
</figure>
 <div class="commentaire">
      <p>L√©gende comment√©e</p>
      <ul>
        <li><span class="crayon vert">\( -\widehat{DAO} \)</span> ‚Üí Il faut s'orienter √† -arcoss(AO/AD)degr√©s soit <span class="mark2">360-arcoss(AO/AD) degr√©s</span></li>
        <li><span class="crayon bleu">\( -\widehat{EAO} \)</span> ‚Üí Il faut s'orienter √† <span class="mark2">arcoss(AO/AD)degr√©s</span></li>
        <li><span class="crayon rouge">\( -\widehat{GAO'} \)</span> ‚Üí Il faut s'orienter √† -arcoss(AO/AD)-90 degr√©s soit <span class="mark2">270-arcoss(AO/AD) degr√©s</span></li>
        <li><span class="crayon aqua">\( -\widehat{FAO'} \)</span> ‚Üí Il faut s'orienter √† <span class="mark2">arcoss(AO/AD)+90 degr√©s</span></li>
      </ul>
    </div>
<h2>Je suis en train de coder la suite de la page üößüößüöß</h2>

	</div>
  <script>
  function copyCode() {
    const code = document.getElementById('code-block').innerText;
    navigator.clipboard.writeText(code).then(() => {
      alert('Code copi√© dans le presse-papiers !');
    });
  }
</script>
</body>
</html>
